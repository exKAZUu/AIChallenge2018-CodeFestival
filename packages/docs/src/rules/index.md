# ゲームルール（**概要版**）

パズルゲーム [2048](<https://ja.wikipedia.org/wiki/2048_(%E3%82%B2%E3%83%BC%E3%83%A0)>) が対戦ゲームになった！

本概要版を2018/11/03 (土)に公開しました。ベータ版を2018/11/07 (水)に、正式版を2018/11/10 (土)に公開予定です。

## 基本ルール

2 人のプレイヤーはそれぞれ **あるサイズ(TBD)の** ボードと 0 のスコアを持っています。
ボードの各マスには高々 1 個の正整数が入ります。
ゲーム開始時、ボードのすべてのマスは空です。
ゲームでは 2 人のプレイヤーに交互にターン（手番）が回り、自分のとる行動を選択します。
ターンは次の 2 個のフェーズからなります。
なお、対戦相手や先攻・後攻は、オンライン対戦システムによって自動的に決定されます。

どちらかのプレイヤーが勝利条件を満たす、もしくは、
2 人のプレイヤーがそれぞれ **一定数(TBD)の** ターン行動するとゲーム終了となり、勝敗が決まります。
勝利条件および勝敗の決め方については、後述の勝利条件をご覧ください。

### メインフェーズ

ターンプレイヤーは上下左右のいずれかの向きを 1 個選択します。
ボード上の数たちは、選択された向きに、ボードの端か他の数にぶつかるまで移動します。
このとき 2 個の等しい数がぶつかると、それらがマージ（加算）されて 1 個の数になります。
**マージが発生するたび、マージによってできた数に等しい値がスコアに加算されます。(TBD)**

#### 例 1

次のような状態のボードについて「右」を選択した場合を考えます。
（`.`は空マスを表します。以下の図示は**ゲームソフトウェアが与える実際の入力形式とは異なります**。）

```
. 4 . 4
4 2 . .
2 2 2 .
4 2 . 2
```

1 行目の 4 と 4 はマージされて 8 になります。
2 行目の 4 と 2 は順序を保ったまま右に移動します。
3 行目の 3 個の 2 は移動の先頭（右端）から順にマージが発生し 4 と 2 になります。
4 行目の 2 と 2 はマージされて 4 になります。続けて 4 とマージはされません。
その結果、ボードは次のように変化しました。

```
. . . 8
. . 4 2
. . 2 4
. . 4 4
```

#### 例 2

次のような状態のボードについて「右」を選択した場合を考えます。
（`.`は空マスを表します。以下の図示は**ゲームソフトウェアが与える実際の入力形式とは異なります**。）

```
2 2 2 2
. . . .
. . . .
. . . .
```

1 行目の 2 と 2 の各ペアはマージされて、それぞれ 4 になります。 8 ではないことに注意してください。
その結果、ボードは次のように変化しました。

```
. . 4 4
. . . .
. . . .
. . . .
```

### アタックフェーズ

**(TBD)**

## 入出力

以下に入出力の形式を記します。出力後に標準出力を flush しなければなりません。

### ゲーム開始前の入力

<pre>
Player
</pre>

- Player: プレイヤー番号
  - `0`: 先攻プレイヤー
  - `1`: 後攻プレイヤー

### ゲーム開始前の出力

<pre>
0
</pre>

- `0`: ゲームを開始する準備ができたことを知らせる出力

### 各ターンの入力

<pre>
A<sub>1,1</sub> A<sub>1,2</sub> ... A<sub>1,M</sub>
A<sub>2,1</sub> A<sub>2,2</sub> ... A<sub>2,M</sub>
:
A<sub>N,1</sub> A<sub>N,2</sub> ... A<sub>N,M</sub>
B<sub>1,1</sub> B<sub>1,2</sub> ... B<sub>1,M</sub>
B<sub>2,1</sub> B<sub>2,2</sub> ... B<sub>2,M</sub>
:
B<sub>N,1</sub> B<sub>N,2</sub> ... B<sub>N,M</sub>
</pre>

- A<sub>i,j</sub>: 自分のボードの i 行目 j 列目のマスの状態
- B<sub>i,j</sub>: 相手のボードの i 行目 j 列目のマスの状態
  - `0` のとき、そのマスは空である。
  - 正整数 a のとき、そのマスの数は 2<sup>a</sup> である。

### 各ターンの出力

**(TBD)**

## 勝利条件

以下の条件のどちらかを満たすことで、ゲームに勝利できます。

1. 対戦相手のプレイヤーのターンに、以下の条件のいずれかを満たした場合
   - 対戦相手のメインフェーズにおいて、対戦相手が行動してもボードの状態が変化しなかった場合
   - 対戦相手の AI プログラムが、ゲームからの入力を受け取らなかった場合
   - 対戦相手の AI プログラムの出力が、定められたフォーマットもしくは制約を満たさなかった場合
1. 2 人のプレイヤーがそれぞれ **一定数(TBD)の** ターンで行動した後、自分のスコアが対戦相手のスコアより高かった場合
1. 2 人のプレイヤーがそれぞれ **一定数(TBD)の** ターンで行動した後、自分のスコアと対戦相手のスコアが等しく、かつ、自分が後攻であった場合

## 実行時間

**(TBD)**
